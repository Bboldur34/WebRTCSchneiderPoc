/**
 * Minified by jsDelivr using Terser v5.3.5.
 * Original file: /npm/mediasoup-client@3.6.34/lib/handlers/sdp/planBUtils.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";function getRtpEncodings({offerMediaObject:s,track:t}){let r;const e=new Set;for(const i of s.ssrcs||[]){if("msid"!==i.attribute)continue;if(i.value.split(" ")[1]===t.id){const s=i.id;e.add(s),r||(r=s)}}if(0===e.size)throw new Error(`a=ssrc line with msid information not found [track.id:${t.id}]`);const i=new Map;for(const t of s.ssrcGroups||[]){if("FID"!==t.semantics)continue;let[s,r]=t.ssrcs.split(/\s+/);s=Number(s),r=Number(r),e.has(s)&&(e.delete(s),e.delete(r),i.set(s,r))}for(const s of e)i.set(s,null);const n=[];for(const[s,t]of i){const r={ssrc:s};t&&(r.rtx={ssrc:t}),n.push(r)}return n}function addLegacySimulcast({offerMediaObject:s,track:t,numStreams:r}){if(r<=1)throw new TypeError("numStreams must be greater than 1");let e,i,n;if(!(s.ssrcs||[]).find((s=>{if("msid"!==s.attribute)return!1;return s.value.split(" ")[1]===t.id&&(e=s.id,n=s.value.split(" ")[0],!0)})))throw new Error(`a=ssrc line with msid information not found [track.id:${t.id}]`);(s.ssrcGroups||[]).some((s=>{if("FID"!==s.semantics)return!1;const t=s.ssrcs.split(/\s+/);return Number(t[0])===e&&(i=Number(t[1]),!0)}));const c=s.ssrcs.find((s=>"cname"===s.attribute&&s.id===e));if(!c)throw new Error(`a=ssrc line with cname information not found [track.id:${t.id}]`);const o=c.value,u=[],a=[];for(let s=0;s<r;++s)u.push(e+s),i&&a.push(i+s);s.ssrcGroups=s.ssrcGroups||[],s.ssrcs=s.ssrcs||[],s.ssrcGroups.push({semantics:"SIM",ssrcs:u.join(" ")});for(let r=0;r<u.length;++r){const e=u[r];s.ssrcs.push({id:e,attribute:"cname",value:o}),s.ssrcs.push({id:e,attribute:"msid",value:`${n} ${t.id}`})}for(let r=0;r<a.length;++r){const e=u[r],i=a[r];s.ssrcs.push({id:i,attribute:"cname",value:o}),s.ssrcs.push({id:i,attribute:"msid",value:`${n} ${t.id}`}),s.ssrcGroups.push({semantics:"FID",ssrcs:`${e} ${i}`})}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.addLegacySimulcast=exports.getRtpEncodings=void 0,exports.getRtpEncodings=getRtpEncodings,exports.addLegacySimulcast=addLegacySimulcast;
//# sourceMappingURL=/sm/7c2c208a3868ca2854ce322901975072aee7e605bc8a723a24e3c1c1791703e3.map