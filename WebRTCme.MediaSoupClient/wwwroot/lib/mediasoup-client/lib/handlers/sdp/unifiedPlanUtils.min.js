/**
 * Minified by jsDelivr using Terser v5.3.5.
 * Original file: /npm/mediasoup-client@3.6.34/lib/handlers/sdp/unifiedPlanUtils.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";function getRtpEncodings({offerMediaObject:s}){const t=new Set;for(const e of s.ssrcs||[]){const s=e.id;t.add(s)}if(0===t.size)throw new Error("no a=ssrc lines found");const e=new Map;for(const r of s.ssrcGroups||[]){if("FID"!==r.semantics)continue;let[s,n]=r.ssrcs.split(/\s+/);s=Number(s),n=Number(n),t.has(s)&&(t.delete(s),t.delete(n),e.set(s,n))}for(const s of t)e.set(s,null);const r=[];for(const[s,t]of e){const e={ssrc:s};t&&(e.rtx={ssrc:t}),r.push(e)}return r}function addLegacySimulcast({offerMediaObject:s,numStreams:t}){if(t<=1)throw new TypeError("numStreams must be greater than 1");const e=(s.ssrcs||[]).find((s=>"msid"===s.attribute));if(!e)throw new Error("a=ssrc line with msid information not found");const[r,n]=e.value.split(" "),o=e.id;let c;(s.ssrcGroups||[]).some((s=>{if("FID"!==s.semantics)return!1;const t=s.ssrcs.split(/\s+/);return Number(t[0])===o&&(c=Number(t[1]),!0)}));const i=s.ssrcs.find((s=>"cname"===s.attribute));if(!i)throw new Error("a=ssrc line with cname information not found");const u=i.value,a=[],d=[];for(let s=0;s<t;++s)a.push(o+s),c&&d.push(c+s);s.ssrcGroups=[],s.ssrcs=[],s.ssrcGroups.push({semantics:"SIM",ssrcs:a.join(" ")});for(let t=0;t<a.length;++t){const e=a[t];s.ssrcs.push({id:e,attribute:"cname",value:u}),s.ssrcs.push({id:e,attribute:"msid",value:`${r} ${n}`})}for(let t=0;t<d.length;++t){const e=a[t],o=d[t];s.ssrcs.push({id:o,attribute:"cname",value:u}),s.ssrcs.push({id:o,attribute:"msid",value:`${r} ${n}`}),s.ssrcGroups.push({semantics:"FID",ssrcs:`${e} ${o}`})}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.addLegacySimulcast=exports.getRtpEncodings=void 0,exports.getRtpEncodings=getRtpEncodings,exports.addLegacySimulcast=addLegacySimulcast;
//# sourceMappingURL=/sm/e5e682c1a2417436063c99f95ca7672087349e072608212418dd73fa2fb4d21a.map