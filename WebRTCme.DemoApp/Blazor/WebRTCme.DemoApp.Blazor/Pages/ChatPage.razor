@page "/ChatPage"
@page "/ChatPage/{ConnectionParametersJson}"
@layout BlankLayout

<style>
.footer {
  position: absolute;
  bottom: 0;
  width: 100%;
  height: 4rem; 
  }
</style>

<h1 class="text-center">Chat</h1>

<div class="list-group mx-4">
    @foreach (var dataParameters in ChatViewModel.DataParametersList)
    {
        if (dataParameters.From == DataFromType.System)
        {
            <div class="row my-1">
                <div class="offset-3 col-6">
                    <div class="row justify-content-center">
                        <div class="card text-warning" style="background:#000080">
                            <div class="card-body">
                                @dataParameters.Message
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        }
        else if (dataParameters.From == DataFromType.Incoming)
        {
            <div class="row my-1">
                <div class="col-9">
                    <div class="row justify-content-start">
                        <div class="card" style=" background:#e6e6f0">
                            <div class="card-body">
                                @dataParameters.Message
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        }
        else if (dataParameters.From == DataFromType.Outgoing)
        {
            <div class="row my-1">
                <div class="offset-3 col-9">
                    <div class="row justify-content-end">
                        <div class="card" style="background:#d3d4bc">
                            <div class="card-body">
                                @dataParameters.Message
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        }
    }
</div>

<div class="footer d-flex bg-primary px-4 py-2 align-items-center">
    <div class="flex-grow-1">
        <EditForm Model="@ChatViewModel.OutgoingText" class="pr-4">
            <InputText @bind-Value="ChatViewModel.OutgoingText" class="w-100"/>
        </EditForm>
    </div> 
    <div class=" ml-auto">
        <button class="btn btn-primary" @onclick="ChatViewModel.Send">
            Send
        </button>
    </div>

</div>

