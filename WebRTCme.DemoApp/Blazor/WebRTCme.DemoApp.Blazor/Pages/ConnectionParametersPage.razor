@*@page "/ConnectionParametersPage"
@page "/ConnectionParametersPage/{TurnServerNamesJson}"
*@

@page "/"

<h3 class="my-5 text-center">Connection Parameters</h3>

<EditForm Model="@ConnectionParametersViewModel.ConnectionParameters" 
          OnValidSubmit="@ConnectionParametersViewModel.Join">
    
    <DataAnnotationsValidator />
    <ValidationSummary />

    <div>
        <label class="col-6 text-right">Connection server type:</label>
        <InputSelect @bind-Value="ConnectionParametersViewModel.SelectedServerType">
            @foreach (var serverType in ConnectionParametersViewModel.ServerTypes)
            {
                <option value="@serverType">@serverType</option>
            }
        </InputSelect>
     </div>

     <div>
        <label class="col-6 text-right">Connection server name:</label>
        <InputSelect @bind-Value="ConnectionParametersViewModel.SelectedServerName">
            @if (ConnectionParametersViewModel.ServerNames is not null)
            {
                @foreach (var serverName in ConnectionParametersViewModel.ServerNames)
                {
                    <option value="@serverName">@serverName</option>
                }
            }
        </InputSelect>
    </div>

    <div>
        <label class="col-6 text-right">Room name:</label>
        <InputText id="roomId" placeholder="enter room name" 
        @bind-Value="ConnectionParametersViewModel.ConnectionParameters.RoomName" />
    </div>

    <div>
        <label class="col-6 text-right">User name:</label>
        <InputText id="userId" placeholder="enter user name" 
        @bind-Value="ConnectionParametersViewModel.ConnectionParameters.UserName" />
    </div>

    <div class="mt-5 text-center">
        <button class="btn btn-primary" type="submit" @onclick="@( () => ConnectionParametersViewModel.IsCall = true)"> 
            Join call
        </button>
        <button class="btn btn-primary" type="submit" @onclick="@( () => ConnectionParametersViewModel.IsCall = false)"> 
            Join chat
        </button>
    </div>
</EditForm>


